/*! Ben's jQuery UI Extensions - v1.1.1 - 2014-03-30
* https://github.com/bseth99/jquery-ui-extensions
* Copyright 2014 Ben Olson; Licensed MIT */
(function(t){t.widget("ui.combobox",{version:"1.1.1",widgetEventPrefix:"combobox",uiCombo:null,uiInput:null,_wasOpen:!1,_create:function(){var i,e,n=this.element.hide();i=this.uiInput=t("<input />").insertAfter(n).addClass("ui-widget ui-widget-content ui-corner-left ui-combobox-input").val(n.children(":selected").text()).attr("tabindex",n.attr("tabindex")),e=this.uiCombo=i.wrap("<span>").parent().addClass("ui-combobox").insertAfter(n),i.autocomplete({delay:0,minLength:0,appendTo:e,source:t.proxy(this,"_linkSelectList")}),t("<button>").attr("tabIndex",-1).attr("type","button").insertAfter(i).button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).removeClass("ui-corner-all").addClass("ui-corner-right ui-button-icon ui-combobox-button"),i.data("ui-autocomplete")._renderItem=function(i,e){return t("<li>").append(t("<a>").html(e.label)).appendTo(i)},this._on(this._events)},_linkSelectList:function(i,e){var n=RegExp(t.ui.autocomplete.escapeRegex(i.term),"i");e(this.element.children("option").map(function(){var e=t(this).text();if(this.value&&(!i.term||n.test(e))){var s={label:e,value:e,option:this};return i.term&&(s.label=e.replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+t.ui.autocomplete.escapeRegex(i.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")),s}}))},_events:{"autocompletechange input":function(i,e){var n=t(i.currentTarget),s=e.item?e.item.option:null;if(!e.item){var o=RegExp("^"+t.ui.autocomplete.escapeRegex(n.val())+"$","i"),r=!1,a=null,u=0,l=-1,h=-1,p=null;if(this.options.autofillsinglematch&&(a=RegExp(t.ui.autocomplete.escapeRegex(n.val()),"i")),this.element.children("option").each(function(){var i=t(this).text();return i.match(o)?(this.selected=r=!0,!1):(a&&(l++,i.match(a)&&(u++,p=t(this),h=l)),undefined)}),!r)if(1==u){s=p[0],s.selected=!0;var c=p.text();n.val(c),n.data("ui-autocomplete").term=c,this.element.prop("selectedIndex",h),console.log("Found single match with '"+c+"'")}else n.val(""),n.data("ui-autocomplete").term="",this.element.prop("selectedIndex",-1)}this._trigger("change",i,{item:s})},"autocompleteselect input":function(t,i){i.item.option.selected=!0,this._trigger("select",t,{item:i.item.option})},"autocompleteopen input":function(){this.uiCombo.children(".ui-autocomplete").outerWidth(this.uiCombo.outerWidth(!0))},"mousedown .ui-combobox-button":function(){this._wasOpen=this.uiInput.autocomplete("widget").is(":visible")},"click .ui-combobox-button":function(){this.uiInput.focus(),this._wasOpen||this.uiInput.autocomplete("search","")}},value:function(t){var i,e=this.element,n=!1;return arguments.length?(e.prop("selectedIndex",-1),e.children("option").each(function(){return this.value==t?(this.selected=n=!0,!1):undefined}),n?this.uiInput.val(e.children(":selected").text()):(this.uiInput.val(""),this.element.prop("selectedIndex",-1)),undefined):(i=e.children(":selected"),i.length>0?i.val():null)},_destroy:function(){this.element.show(),this.uiCombo.replaceWith(this.element)},widget:function(){return this.uiCombo},_getCreateEventData:function(){return{select:this.element,combo:this.uiCombo,input:this.uiInput}}})})(jQuery);