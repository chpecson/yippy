/*! Ben's jQuery UI Extensions - v1.1.1 - 2014-03-30
* https://github.com/bseth99/jquery-ui-extensions
* Copyright 2014 Ben Olson; Licensed MIT */
(function(t){"use strict";var i=t.ui.spinner.prototype._stop;t.ui.spinner.prototype._stop=function(t){var e=this.value()||0;t&&"keyup"==t.type&&e!=this._adjustValue(e)?(this.value(this.previous),this._trigger("invalid",t)):(this.previous=e,this.element.val(this._format(e))),i.call(this,t)},t.widget("ui.paddedspinner",t.ui.spinner,{widgetEventPrefix:"spin",options:{padCount:2,padString:"0"},_parse:function(t){return+t},_format:function(t){for(var i=t+"";i.length<this.options.padCount;)i=this.options.padString+i;return i}}),t.widget("ui.ampmspinner",t.ui.spinner,{widgetEventPrefix:"spin",options:{max:1,min:0,alignment:"vertical"},_parse:function(t){return"string"==typeof t?"AM"==t?0:1:t},_format:function(t){return 0===t?"AM":"PM"}}),t.widget("osb.timepicker",{version:"1.1.1",widgetEventPrefix:"timepicker",options:{format:"hh:mm A"},_init:function(){var t=this,i='<input class="ui-timepicker-hour"/><span style="font-size: 1.4em">:</span><input class="ui-timepicker-minute"/>';this.hour24=this.options.format.indexOf("HH")>-1,this.hour24||(i+=' <input class="ui-timepicker-ampm"/>'),this.element.empty().html(i),this.$hour=this.element.children(".ui-timepicker-hour").paddedspinner({alignment:"vertical",min:this.hour24?-1:0,max:this.hour24?24:13,spin:function(i,e){var n,s=+e.value,o=t.hour24?-1:0,r=t.hour24?24:13;return o>=s||s>=r?(o>=s&&t.$hour.paddedspinner("value",r-1),s>=r&&t.$hour.paddedspinner("value",o+1),t.hour24||(n=t.$ampm.ampmspinner("value"),t.$ampm.ampmspinner("value",0==n?1:0)),t._trigger("change",t._value()),!1):(t._trigger("change",t._value()),void 0)},stop:function(){var i=+t.$hour.val(),e=t.hour24?-1:0,n=t.hour24?24:13;(e>=i||i>=n)&&t.$hour.val(""),t._ensureValue()}}),this.$minute=this.element.children(".ui-timepicker-minute").paddedspinner({alignment:"vertical",min:-1,max:60,spin:function(i,e){var n,s=+e.value;return-1>=s||s>=60?(-1>=s&&t.$minute.paddedspinner("value",59),s>=60&&t.$minute.paddedspinner("value",0),n=t.$hour.paddedspinner("value"),n=-1==s?n-1:n+1,t.$hour.paddedspinner("value",n).data("ui-paddedspinner")._trigger("spin",i,{value:n}),t._trigger("change",t._value()),!1):(t._trigger("change",t._value()),void 0)},stop:function(){var i=+t.$minute.val();(-1==i||60==i)&&t.$hour.val(""),t._ensureValue()}}),this.hour24||(this.$ampm=this.element.children(".ui-timepicker-ampm").ampmspinner({spin:function(){t._trigger("change",t._value()),t._ensureValue()}})),this._on(this._events)},_events:{"click input":function(i){var e=t(i.currentTarget);e.select()}},_destroy:function(){this.element.empty()},_value:function(){var t,i=+this.$hour.val(),e=+this.$minute.val(),n=this.hour24?"":this.$ampm.val();return window.moment?(i="PM"==n&&12>i?i+12:i,t=moment({hour:i,minute:e})):(t=i+":"+e,this.hour24||(t+=" "+n)),t},_parse:function(t){var i,e,n,s,o;if(window.moment){if(i=t instanceof Date?moment(t):moment(t,this.options.format),!i.isValid())return;n=i.hour(),s=i.minute(),this.hour24||(o=n>=12?"PM":"AM",n=n>12?n-12:n)}else{if(e=t.split(/[: ]/),2>e.length)return;n=e[0],s=e[1],this.hour24||(o=e[2]||"AM")}this.$hour.paddedspinner("value",+n),this.$minute.paddedspinner("value",+s),this.hour24||this.$ampm.ampmspinner("value","AM"==o?0:1)},_ensureValue:function(){var t=new Date,i=this.$hour.val(),e=this.$minute.val(),n=this.hour24?"":this.$ampm.val();i||this.$hour.paddedspinner("value",(i=t.getHours())>12?i-12:i),e||this.$minute.paddedspinner("value",t.getMinutes()),this.hour24||n||this.$ampm.ampmspinner("value",t.getHours()>12?"PM":"AM")},value:function(t){return t===void 0?this._value():(this._parse(t),void 0)}})})(jQuery);